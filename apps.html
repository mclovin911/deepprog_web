<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>DeepProg web apps alpha</title>

  <!-- Bootstrap -->
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/font-awesome.min.css">
  <link href="css/animate.min.css" rel="stylesheet">
  <link href="css/prettyPhoto.css" rel="stylesheet">
  <link href="css/main.css" rel="stylesheet">
  <link href="css/responsive.css" rel="stylesheet">
  <style>
    img {
      vertical-align: initial;
      border-style: none;
    }
  </style>
  <script src="//code.jquery.com/jquery-3.3.1.min.js"></script>
</head>

<body class="homepage">
 <header id="header">
  <nav class="navbar navbar-fixed-top" role="banner">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">DeepProg Experimental WebApps</a>
      </div>

      <div class="collapse navbar-collapse navbar-right">
        <ul class="nav navbar-nav">
          <li class="active"><a href="/">Home</a></li>
          <!-- <li><a href="/action_hcc">HCC model</a></li> -->
          <!-- <li><a href="/action_brca">BRCA model</a></li> -->
          <li><a href="portfolio.html">Portfolio</a></li>
          <li><a href="contact-us.html">Contact</a></li>
        </ul>
      </div>
    </div><!--/.container-->
  </nav><!--/nav-->
</header><!--/header-->

<section id="feature" style={{ "width:1900px;" if main_apps.predicted_any[cancer] else "" }}>
  <div class="container" style={{ "width:1900px;" if main_apps.predicted_any[cancer] else "" }}>
    <div class="center wow fadeInDown">
      <br><br><br><br><br><br><br>
      <h2>{{ main_apps.cancer_dict[cancer].cancer_type }} models</h2>
    </div>
    <div class="training" style={{ "width:1900px;" if main_apps.predicted_any[cancer] else "width:1200px;" }}>
      {% for dataset in main_apps.cancer_dict[cancer].training_tsvs %}
      <div id="{{ dataset }}_raw">
        <h1><font color="black">DeepProg model for {{ dataset }}</font></h1>
        <p class="{{ dataset }}"></p>
        <table>
          <tr><th><h4><b><center>Training survival plot</center></b></h4></th>
            <th><h4><b><center>Training kernel plot</center></b></h4></th>
          </tr>
          <tr><th>
            <img src="deepprog_results/{{ dataset }}/{{ dataset }}_KM_plot_boosting_full.jpg"
            style="width:680px; height:680px;">
          </th>
          <th><img src="/deepprog_results/{{ dataset }}/{{ dataset }}_STAD_KM_plot_boosting_test.jpg"
            style="width:680px; height:680px;">
          </th>
      </tr>
    </table>
  </div>
  {% endfor %}
</div><!--/.row-->
</div><!--/.container-->
</section><!--/#feature-->








<div class="container">
  <div class="center wow fadeInDown">
    <section id="form"><!--/#form-->
      <br>
      <br>
      <h2><center><b>Drop your own sample!</b></center></h2>
      <form method="POST" enctype="multipart/form-data">
       <label for='rna_file'> RNA file: </label>
       <input type='file' id='rna_file' name='rna_file'> <br><br>
       <label for='mir_file'> MIR file: </label>
       <input type='file' id='mir_file' name='mir_file'> <br><br>
       <label for='meth_file'> METH file: </label>
       <input type='file' id='meth_file' name='meth_file'> <br><br>
       <label for='test_name'> Test Name: </label>
       <input type='text' id='test_name' name='test_name'> <br><br>
       <!-- <input class="btn btn-lg btn-success" value="Submit TEST" type="submit" role="button"> -->
       <button id="upload-file-btn" type="button">Submit</button>
     </form>
   </section>
 </div>
</div>
<br>
<br>
<br>
<section id="middle">
  <div class="container">
    <div class="row">
      <div class="col-sm-6 wow fadeInDown">
        <div class="skill">
          <h2>Our cancer types</h2>
          <p>Number of training datasets per cancer type.</p>
          {% set count = 1 %}
          {% for key in main_apps.cancer_dict %}
          <div class="progress-wrap">
            <h3>{{ main_apps.cancer_dict[key].key.upper() }}</h3>
            <div class="progress">
              <div class="progress-bar  color{{ count }}" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 80%">
                <span class="bar-width">{{ main_apps.cancer_dict[key].training_tsvs|length }}</span>
              </div>
            </div>
          </div>
          {% set count = count + 1 %}
          {% endfor %}

        </div><!--/.col-sm-6-->

        <div class="col-sm-6 wow fadeInDown">
          <div class="accordion">
            <h2>About DeepProg</h2>
            <div class="panel-group" id="accordion1">
              <div class="panel panel-default">
                <div class="panel-heading active">
                  <h3 class="panel-title">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion1" href="#collapseOne1">
                      Garmire Lab
                      <i class="fa fa-angle-right pull-right"></i>
                    </a>
                  </h3>
                </div>

                <div id="collapseOne1" class="panel-collapse collapse in">
                  <div class="panel-body">
                    <div class="media accordion-inner">
                      <div class="pull-left">
                        <img class="img-responsive" src="images/garmire-lana.jpg">
                      </div>
                      <div class="media-body">
                       <h4>Focus of the garmire lab</h4>
                       <p>dep learning single-cell</p>
                     </div>
                   </div>
                 </div>
               </div>
             </div>

           </div>
         </div>

       </div><!--/.row-->
     </div><!--/.container-->
   </section><!--/#middle-->

   <section id="bottom">
    <div class="container wow fadeInDown" data-wow-duration="1000ms" data-wow-delay="600ms">
      <div class="row">
        <div class="col-md-3 col-sm-6">
          <div class="widget">
            <h3>Garmire lab</h3>
            <ul>
              <li><a href="#">About us</a></li>
              <li><a href="#">We are hiring</a></li>
              <li><a href="#">Meet the team</a></li>
              <li><a href="#">Copyright</a></li>
            </ul>
          </div>
        </div><!--/.col-md-3-->

      </div>
    </div>
  </section><!--/#bottom-->

  <div class="top-bar">
    <div class="container">
     <div class="row">
       <div class="col-lg-12">
         <div class="social">
          <ul class="social-share">
           <li><a href="#"><i class="fa fa-facebook"></i></a></li>
           <li><a href="#"><i class="fa fa-twitter"></i></a></li>
           <li><a href="#"><i class="fa fa-linkedin"></i></a></li>
           <li><a href="#"><i class="fa fa-dribbble"></i></a></li>
           <li><a href="#"><i class="fa fa-skype"></i></a></li>
         </ul>
       </div>
     </div>
   </div>
 </div><!--/.container-->
</div><!--/.top-bar-->

<footer id="footer" class="midnight-blue">
  <div class="container">
    <div class="row">
      <div class="col-sm-6">
        &copy; 2015 <a target="_blank" href="http://bootstraptaste.com/" title="Free Twitter Bootstrap WordPress Themes and HTML templates">bootstraptaste</a>. All Rights Reserved.
      </div>

      <div class="col-sm-6">
        <ul class="pull-right">
          <li><a href="#">Home</a></li>
          <li><a href="#">About Us</a></li>
          <li><a href="#">Faq</a></li>
          <li><a href="#">Contact Us</a></li>
        </ul>
      </div>
    </div>
  </div>
</footer><!--/#footer-->

<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="js/jquery.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.prettyPhoto.js"></script>
<script src="js/jquery.isotope.min.js"></script>
<script src="js/wow.min.js"></script>
<script src="js/main.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

<!-- The Result -->
<div id="results" class="result_class">

  <!-- Modal content -->
  <div class="result-content">
    <span id='result_bye' class="close">&times;</span>
    <ul id=result_list>
    </ul>
  </div>

</div>

<script>
  var popup = document.getElementById("results");
  var bye = document.getElementById("result_bye");
  bye.onclick = function() {
    popup.style.display = "none";
  }
  window.onclick = function(event) {
    if (event.target == popup) {
      popup.style.display = "none";
    }
  }
</script>



<script type=text/javascript>
  $(function() {
    $('#upload-file-btn').click(function() {
      var form_data = new FormData(); 
      form_data.append("rna_file", $("#rna_file").prop('files')[0]);
      form_data.append("mir_file", $("#mir_file").prop('files')[0]);
      form_data.append("meth_file", $("#meth_file").prop('files')[0]);
      form_data.append("test_name", $("#test_name").val());
      form_data.append("cancer_type", "COAD");
      $.ajax({
        type: 'POST',
        url: '/get_result',
        data: form_data,
        contentType: false,
        cache: false,
        processData: false,
        success: function(dat) {
          popup.style.display = "block";
          for(let i=0; i<dat.results.length; i++){
            $("#result_list").append('<li><a href="/downloads/' + dat.results[i] + '" target="blank">' + dat.results[i] + '</a></li>');
          }
        },
      });
    });
  });
</script>

</body>
</html>
